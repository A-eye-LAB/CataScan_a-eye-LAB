# 사용자 가이드

이 문서에서는 CataScan 모바일 앱의 사용 방법에 대해 설명합니다.
(작성중.. 관련 이미지 및 세부설명 추가 필요)

[처음으로](../overview.md) | 
[소개로](00_introduction.md) | 
[이전: API](03_api.md) 

## 1. 애플리케이션 설치

### Android  
Google Play Store에서 **"CataScan"** 검색 후 다운로드  

### iOS  
App Store에서 **"CataScan"** 검색 후 다운로드  

## 2. 화면 구성 및 사용 방법
**시작 화면**
 - **Start Scan**: 개인 사용자
 - **For Vision Center >**: 센터용
### 2.1 개인 사용자 모드
#### 2.1.1 개인 정보 입력 화면
 - 사용자의 **이름, 성별, 나이**를 입력
 - 첫 진입시에만 설문을 입력하며, 로그인후 해당 과정 건너뜀 
#### 2.1.2 메인 화면
 - **Check Your Eye** 버튼을 클릭하여 백내장 검사 시작
 - 저장된 검사 기록이 화면에 표시됨
#### 2.1.3 촬영 모드 선택
##### 2.1.3.1 개인(셀피) 촬영 모드
 - **Yes, I'm Scanning Myself** 버튼 클릭하여 촬영 모드 선택
 - 왼쪽/오른쪽 눈 촬영 가능**  
##### 2.1.3.2 타인 촬영 모드
 - **I Have Someone to Scan Me** 버튼 클릭하여 촬영 모드 선택
 - 왼쪽/오른쪽 눈 촬영 가능**
##### 2.1.4 사진 확인 화면
 - 촬영된 사진 확인후 **Analysis** 버튼 클릭
##### 2.1 5 AI 분석중 화면
 - 촬영 후 AI 분석 수행
#### 2.1.6 분석 결과 화면
 - AI 모델이 백내장 여부를 분석 후 결과 표시  
 - 분석 결과 확인 후 **Confirm Above and Exit Report** 버튼 클릭하여 메인 화면으로 이동
 - 결과 데이터가 메인 화면에 저장됨
 - 저장된 데이터는 메인 화면에서 확인 및 관리 가능
#### 2.1.7 개인 정보 수정 화면
 - 개인정보 수정
 - 로그아웃
<br>

### 2.2 센터 모드
#### 2.2.1 로그인 화면
 - Center ID와 Password 입력 후 **Sign In** 버튼 클릭
 - 인터넷 미연결시 별도의 화면이 표출 되며 인터넷 환경 설정후 **Try Again** 버튼 클릭
### 2.2.2 메인 화면
 - 서버에 업로드 되지 못한 검사 기록이 화면에 표시됨
 - **Upload to Web**: 서버 업로드에 실패한 데이터 일괄 전송  
 - **Add Scan Data**: 새로운 환자 데이터 추가  
#### 2.1.3 환자 정보 입력 화면
 - 환자의 **이름, 성별, 코멘트** 입력
#### 2.1.4 이용약관 동의 화면
 - 동의시 **I Agree and Proceed** 버튼 클릭
 - 비동의시 **Disagree and leave this page** 버튼 클릭
##### 2.1.4 타인 촬영 모드
 - **Start eye scan** 버튼 클릭 하여 촬영 시작
 - 왼쪽/오른쪽 눈 촬영 가능**
##### 2.1.5 사진 확인 화면
 - 촬영된 사진 확인후 **Analysis** 버튼 클릭
 - 개인 사용자 모드와 동일하게 왼쪽/오른쪽 눈 촬영 및 AI 분석 진행
##### 2.1.6 AI 분석중 화면
 - 촬영 후 AI 분석 수행
#### 2.1.7 분석 결과 화면
 - **Exit Report**: 현재 데이터 폐기 후 **FailList 화면**으로 이동
 - **Start Another Scan**: 분석된 데이터를 서버로 업로드. 인터넷 연결이 없거나 서버에 문제가 있는 경우 로컬에 임시 저장되며, FailList에서 조회 및 업로드 가능
 - AI 모델이 백내장 여부를 분석 후 결과 표시  
#### 2.1.5 선터 정보 확인 화면
 - 로그아웃


## 3. 데이터 구조

### 3.1 저장되는 데이터 항목
- **환자 정보**: 사용자 이름, 성별, 기타 병력(선택사항)  
- **이미지 데이터**: 왼쪽 눈 사진, 오른쪽 눈 사진  
- **분석 결과**: 왼쪽 눈 진단 결과, 오른쪽 눈 진단 결과  

### 3.2 데이터 흐름
1. 환자 정보 입력  
2. 눈 사진 촬영  
3. 로컬 기기에서 AI 분석 수행  
4. 분석 결과 데이터 임시 저장  
5. 서버 업로드 (센터 모드)  
   - **성공 시**: 로컬 데이터 삭제  
   - **실패 시**: 메인 화면에 저장 후 재업로드 가능. 재업로드 성공 후 로컬 데이터 삭제

## 4.문제해결 및 FAQ

### 일반적인 문제

#### Q: 카메라가 작동하지 않는 경우
A:
1. 앱 설정에서 카메라 권한이 허용되어 있는지 확인
2. 다른 카메라 앱이 정상 작동하는지 확인
3. 기기를 재부팅한 후 다시 시도

### 센터 모드 문제

#### Q: 로그인이 되지 않는 경우
A:
1. 인터넷 연결 상태 확인
2. ID와 비밀번호가 정확한지 확인

#### Q: 데이터 업로드가 실패하는 경우
A:
1. 인터넷 연결 상태 확인
2. 로그아웃 후 다시 로그인
3. FailList에서 "Upload to Web" 버튼을 통해 재시도


<br>
<br>


# 화면 기능 상세

## 1.로비(비로그인)

| No. | Description |
|:-------------- |:--------------|
| 1   | 최초 화면 - 환자 정보 입력이 없는 경우에만 이 화면을 노출합니다. 로그인된 경우(즉, 디바이스에 저장된 환자 정보가 있는 경우) 이 화면없이 [화면4]를 노출합니다.||
| 2   | BI 이미지 - gif 파일로 움직이는 looping 이미지 구현 예정입니다.||
| 3   | 타이틀 텍스트 - (후순위) 텍스트 애니메이션 적용 (링크)||
| 4   | 진입 버튼 - (첫 방문) 사용자의 프로필정보가 없다면 [화면4-1]로 이동합니다. 프로필정보: 이름, 성별, 나이, (재방문) [화면5. 범용 메인화면]으로 이동합니다.||
| 5   | 센터용 버튼 - (첫 방문) 로그인 정보가 없다면 [화면2-1. 센터용 로그인]으로 이동합니다. (재방문) [화면3. 센터용 메인화면]으로 이동합니다.||
| 6-1 | Terms of Service 링크 - 클릭 시, 링크 ‘https://catascan.org/terms-of-service’ 로 이동 ||
| 6-2 | Privacy Policy 링크 - 클릭 시, 링크 ‘https://catascan.org/privacy-policy’ 로 이동 ||


## 2-1. 센터용 로그인

| No. | Description |
|:-------------- |:--------------|
| 1   | ID input field - 클릭해서 바로 입력 가능||
| 2   | PW input field - 클릭해서 바로 입력 가능||
| 3   | 로그인 버튼 - 클릭 후 성공시 [화면 3]으로 이동, 클릭 후 실패시 동일 화면 유지||
| 4   | 로그인 실패시 Alert - (로그인 정보 잘못 입력시 표출, 2,3의 Input field outline의 색상 변화||


## 2-2. 센터용 (네트워크 미연결)

| No. | Description |
|:-------------- |:--------------|
| 1   | 재시도 버튼 - 클릭시 Refesh, 네트워크 연결시 [화면 2-1] 이동, 네트워크 미연결시 동일한 화면 [화면 2-2] 표출||


## 3.  센터용 메인화면

| No. | Description |
|:-------------- |:--------------|
| 1   | My Info 메뉴 - 클릭 시, [화면 7-2]로 이동합니다.|
| 3-1 | 콘텐츠 - 검진 결과가 없을 경우 노출됩니다.|
| 3-2 | 검진 기록 - 서버에 업로드되지 못한 검진 결과를 노출합니다., 업로드 완료 시 즉시 미노출됩니다.|
| 4   | Upload to Web 버튼 - 클릭 시 '3-2 영역의 검진 결과를 서버에 업로드합니다.'|
| 5   | 촬영 버튼 - 클릭시 '[화면 4-2]으로 이동합니다.'|


## 4-1.  환자 정보 입력_시작

| No. | Description |
|:-------------- |:--------------|
| 1   | 프로그레스 인디케이터 - 4-2 페이지 1/3, 4-3 페이지 2/3, 4-4 페이지 3/3 |
| 2-1 | 이름 input field - 페이지 진입 시 자동으로 커서 focus, 플레이스홀더 “Name” |
| 2-2 | 이름 input field_입력 중 - 유저 입력값 '중앙정렬로 타이핑'|
| 3   | Previous 버튼 - 클릭 시 이전 페이지로 돌아감, 돌아갈 이전 페이지가 있는 경우, 활성화|
| 4   | Confirm 버튼 - 2번에서 유저 입력값이 생성된 경우 활성화, 클릭 시 다음화면으로 이동합니다.'[화면 4-2] → [화면 4-3] → [화면 4-4]'|


## 4-3.  환자 정보 입력_성별

| No. | Description |
|:-------------- |:--------------|
| 1-1 | 선택지 버튼 - 단일선택 가능, 버튼 상태 '디폴트 UI 적용' | 
| 1-2 | 선택지 버튼_선택 이벤트 발생 - 선택시 강조 UI 적용 '예시의 [Female]', 선택되지 않은 버튼은 비활성화 UI '예시의 [Male, Other]'| 


## 4-4.  환자 정보 입력_나이

| No. | Description |
|:-------------- |:--------------|
| 1-1 | 선택지 버튼 - 단일선택 가능, 버튼 상태 '디폴트 UI 적용', 스크롤 영역 처리 | 
| 1-2 | 선택지 버튼_선택 이벤트 발생 - 선택시 강조 UI 적용 '예시의 [50-55]', 선택되지 않은 버튼은 비활성화 UI '예시의 [Under 30, 40-50...]'| 


## 4-5.  환자 정보 입력_이름

| No. | Description |
|:-------------- |:--------------|
| 1   | 프로그레스 인디케이터 - 4-5 페이지 1/3, 4-6 페이지 2/3, 4-7 페이지 3/3 |
| 2-1 | 이름 input field - 페이지 진입 시 자동으로 커서 focus, 플레이스홀더 “Name” |
| 2-2 | 이름 input field_입력 중 - 유저 입력값 '중앙정렬로 타이핑'|
| 3   | Previous 버튼 - 클릭 시 이전 페이지로 돌아감, 돌아갈 이전 페이지가 있는 경우 활성화|
| 4   | Confirm 버튼 - 2번에서 유저 입력값이 생성된 경우 활성화, 클릭 시 다음화면으로 이동합니다.'[화면 4-5] → [화면 4-6] → [화면 4-7]'|


## 4-6.  환자 정보 입력_성별

| No. | Description |
|:-------------- |:--------------|
| 1-1 | 선택지 버튼 - 단일선택 가능, 버튼 상태 '디폴트 UI 적용' | 
| 1-2 | 선택지 버튼_선택 이벤트 발생 - 선택시 강조 UI 적용 '예시의 [Female]', 선택되지 않은 버튼은 비활성화 UI '예시의 [Male, Other]'| 


## 4-7.  환자 정보 입력_Remark

| No. | Description |
|:-------------- |:--------------|
| 1   | Comment input field - 클릭해서 바로 수정 가능, focus 상태에서 테두리 색상 적용 #027AFA | 
| 2   | Skip for now 버튼 - 클릭 시 다음화면으로 이동합니다.'[화면 8-2. 이용약관 동의]로 이동'| 


## 5. 범용 메인화면

| No. | Description |
|:-------------- |:--------------|
| 1   | My Info 메뉴 - 클릭 시, [화면 7-1]로 이동합니다.| 
| 2   | banner - case에 따라 메시지 노출이 바뀝니다. 검진 기록 없음 'Ready for your first eye health check? Scan now to get started!'. 위험인 경우 'Potential cataract risk detected. We recommend visiting your eye doctor'. 검출된 경우 'It is strongly advised that you visit the doctor’s office'| 
| 3-1 | 콘텐츠 - (검진 결과가 없을 경우 노출됩니다.| 
| 3-2 | 검진 기록 - 검진 결과가 있을 경우 노출됩니다. 최대 nn개 까지 제공합니다. (초과 시 가장 오래된 기록부터 삭제)| 
| 5   | 촬영 버튼 - [화면6]으로 이동합니다.|
| 6   | 닉네임 노출 - 서베이로 수집한 Name을 노출합니다. 'Hello, {Name}!'|
| 7   | 체크박스 - 항목 1개 이상 선택시 <8. 선택 삭제 버튼> 표출|
| 8   | 선택 삭제 버튼 - 버튼 클릭시 <8-2 모달> 표출|
| 9   | 삭제 버튼 - 클릭시 해당 아이템 삭제 및 [화면 5. 메인화면]으로 이동|
| 10  | 취소 버튼 - 클릭시 <8-2 모달> 닫힘|


## 7-1. 환자 정보 확인/수정

| No. | Description |
|:-------------- |:--------------|
| 1   | 아바타 - Name의 이니셜 대문자로 표기| 
| 2   | 이름 input field - 클릭해서 바로 수정 가능| 
| 3   | Age Group Dropdown - 클릭해서 바로 수정 가능|
| 4   | 성별 선택 Radio Button - 선택지중 하나 선택하여 바로 수정 가능 (택 1)|
| 5   | 질병 여부 선택 Dropdown - 선택지 다중 선택 가능 -> 시스템 UI 관련 확인 필요|
| 6   | 로그아웃 버튼 - 클릭시 <6-2 모달> 노출|
| 7   | 저장 버튼 - 노출 조건 (2,3,4,5 영역에서 변경 사항 발생 시 활성화된 버튼 노출, 위 영역에서 변경 사항이 없다면 버튼은 미노출), 배경 (버튼 뒤로 흰색 그라디언트 적용)|
| 8   | 취소 버튼 - 클릭시  <6-2 모달>  닫힘|
| 9   | 로그아웃 버튼 - 클릭시 [화면 1. 로비]로 이동|


## 7-2. 센터 정보 확인/수정

| No. | Description |
|:-------------- |:--------------|
| 1   | 아바타 - Center Name의 이니셜 대문자로 표기| 
| 2   | 로그아웃 버튼 - 클릭시 '[화면 1]로 이동'|


## 8-2. 이용약관 동의

| No. | Description |
|:-------------- |:--------------|
| 1   | Loader 이미지 - gif 파일 표출| 
| 2   | Username - [화면 5-2-3]에서 입력된 값 노출|
| 3   | 미동의 버튼 - 클릭시 '[화면 3]로 이동'|
| 4   | 동의 버튼 - 클릭시 '[화면 8]로 이동'|


## 9. 접근권한 동의

| No. | Description |
|:-------------- |:--------------|
| 1   | 접근권한이 없을 시 [화면 8-. 이용약관 동의]로 이동합니다.| 
| 2   | 접근권한이 있을 시 [화면 10. 촬영모드 선택]으로 이동합니다.| 


## 10. 촬영모드 선택

| No. | Description |
|:-------------- |:--------------|
| 1   | Loader 이미지 - gif 파일 표출| 
| 2   | 셀프 촬영 모드 선택 버튼 - 클릭 시 [화면 12]로 이동합니다. '전면 사진촬영 모드로 시작합니다.'| 
| 3   | 타인 촬영 모드 선택 버튼 - 클릭 시 [화면 12]로 이동합니다. '후면 사진촬영 모드로 시작합니다.'|
| 4   | 취소 버튼 - 클릭 시 [화면 5] 범용 메인화면으로 이동합니다.|


## 11-1. 촬영전 주의사항_셀프

| No. | Description |
|:-------------- |:--------------|
| 1   | 스캔 시작 버튼 - 클릭 시 [화면 12]로 이동합니다. '후면 사진촬영 모드로 시작합니다.'| 


## 11-2. 촬영전 주의사항_타인

| No. | Description |
|:-------------- |:--------------|
| 1   | 다음 버튼 - 클릭 시 촬영 가이드 두번째 페이지로 이동합니다.| 
| 2   | 스캔 시작 버튼 - 클릭 시 [화면 12]로 이동합니다. '후면 사진촬영 모드로 시작합니다.'| 


## 12. 촬영

| No. | Description |
|:-------------- |:--------------|
| 1   | Skip 버튼 - 촬영을 스킵합니다., 좌안을 스킵한 상태에서는 skip 버튼이 비활성화 됩니다.(하나이상의 눈촬영이 있어야 활성화 되는 조건)| 
| 2   | 좌안/우안 인디케이터 - 기본 좌안부터 시작합니다., 촬영 후 다음 눈으로 자동 전환됩니다.| 
| 3   | 수동 촬영 버튼 - 클릭 시 사진을 촬영합니다., 촬영 직후 '[화면 Crop Image] 으로 이동합니다.'| 
| 3-1 | 닫기 버튼 - 클릭 시 이전 화면 으로 돌아갑니다.| 
| 3-2 | Banner - case에 따라 메시지 노출이 바뀝니다. (눈 사진이 아닌 경우 (다시 찍으라는 문구): 'The image isn’t suitable for analysis. Please try again.', 눈 사진인 경우 경우 (Crop에 대한 가이드 문구): 'Please align your eye with the guide.')| 
| 3-3 | 재촬영 버튼 - 클릭 시 이전 화면 으로 돌아갑니다.| 
| 3-4 | 저장 버튼 - 좌안의 경우: 클릭 시 촬영 화면이로 이동하며, 4-1 썸네일 영역에 이미지 표출, 우안의 경우: 클릭시 [화면 12] 으로 이동| 
| 4-1 | 촬영본 임시 저장 - 썸네일 좌측 하단에 좌안 혹은 우안에 대한 정보를 보여줍니다.,직전 촬영본이 Skip 상태인 경우 Empty State 이미지를 보여줍니다 <4-2 Empty State>| 
| 5   | 촬영 가이드_시선 - 사용자의 시선에 대한 가이드를 제공합니다., 전면 촬영일 경우에만 노출됩니다.| 
| 6   | 촬영 주의사항 정보 - 클릭 시 [화면 11-1 혹은 11-2]으로 이동합니다.| 


## 13. 사진 확인

| No. | Description |
|:-------------- |:--------------|
| 1   | 촬영 일자 - day Month YYYY, HH:MM pm/am| 
| 2-1 | 이미지 (Empty State) - 이미지를 Skip 한 경우 Empty State를 제공| 
| 2-2 | 이미지 - 가공된 이미지 노출 (촬영시 Image Crop 적용)| 
| 2-3 | 이미지 (Ungradable) - 이미지 위에 Opacity 40% #000000 적용, 느낌표 아이콘과 Ungradable 텍스트 노출| 
| 3   | 분석 버튼 - 클릭 시 [화면 10]으로 이동| 
| 4   | 안내 메세지 바텀시트 - Ungradable 이미지가 있는 상황에서 3번 분석 버튼 누를 경우 노출 (Retake 클릭 시:'Ungradable에 해당하는 눈 재촬영', '양안 모두 Ungradable일 경우, 한 쪽씩 연속으로 재촬영', Proceed Anyway 클릭 시: 
 '분석 진행'| 


## 14. 결과 분석중

| No. | Description |
|:-------------- |:--------------|
| 1   | n초 노출 후: '분석 성공 시 [화면 12-1]로 이동', '분석 실패 시 [화면 12-2]로 이동'| 


## 15-1. 범용 분석 결과 화면

| No. | Description |
|:-------------- |:--------------|
| 1   | 결과 summary - 결과값에 따라 배너 3종 중 1종 노출, 한 쪽만 ungradable인 경우 다른 쪽 결과로 표시| 
| 2   | 결과 details - 양안 검사 결과 노출| 
| 3   | 확인 버튼 - 클릭 시, [화면 5. 범용 메인화면]으로 이동| 
| 4   | 센터 정보 링크 - Requires Attention 인 경우에 노출되는 버튼, 클릭 시 '링크 ‘https://catascan.org/info’ 로 이동' | 


## 15-2. 센터용 분석 결과 화면

| No. | Description |
|:-------------- |:--------------|
| 1   | 결과 summary - 결과값에 따라 배너 3종 중 1종 노출, 한 쪽만 ungradable인 경우 다른 쪽 결과로 표시| 
| 2   | 환자 정보 - 해당 스캔의 ID, 환자 이름, 성별을 표기| 
| 3   | 결과 details - 양안 검사 결과 노출| 
| 4   | 메인화면 이동 버튼 - 클릭 시 [화면 3]로 이동| 
| 5   | 확인 및 다음 스캔 이동 버튼 - 클릭 시 '[화면 4]로 이동하여 바로 다음 환자를 스캔 할 수 있도록 합니다.', 클릭 시 '서버로 전송하여 웹 어드민에서 조회 가능하도록 합니다' (전송 실패 시, [화면 3.센터용 메인화면]에 해당 검진 기록 노출) | 


## 16. 분석 실패 화면

| No. | Description |
|:-------------- |:--------------|
| 1   | 취소 버튼 - 취소 시 사진 저장 여부| 
| 2   | 재시도 버튼 | 




